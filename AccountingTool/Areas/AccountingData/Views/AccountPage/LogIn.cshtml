@{
    Layout = "~/Views/Shared/_LayoutAccoutPage.cshtml";
}

<div id="app" class="text-center">
    <div class="container max-width-500">
        <div>
            @* 信箱(帳號) *@
            <label class="form-label w-100 d-flex flex-column align-items-start">
                信箱(帳號)
                <input type="text" class="form-control" v-model="form.email">
            </label>
            @* 密碼 *@
            <label class="form-label w-100 d-flex flex-column align-items-start">
                密碼
                <input type="password" class="form-control" v-model="form.password">
            </label>

            @* 送出按鈕 *@
            <div class="text-center">
                <button type="button" class="btn btn-dark" v-on:click="logIn">送出</button>
            </div>
        </div>
    </div>
</div>
@section scripts{
    <script>
        const app = Vue.createApp({
            data() {
                return {
                    form: {
                        email: null, password: null
                    },
                }
            }
            , methods: {
                logIn() {
                    const url = window.location.origin + "/api/Users/logIn"
                    axios.post(url, this.form)
                        .then((res) => {
                            document.cookie = `accountingToolToken=${res.data}; path=/`;
                            window.location = window.location.origin
                        })
                        .catch(() => {
                            alert("帳號或密碼錯誤")
                        })
                }
            }
        });
        const vm = app.mount('#app');
    </script>
}